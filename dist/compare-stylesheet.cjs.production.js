"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var csso=_interopDefault(require("csso")),csstree=_interopDefault(require("css-tree"));function __read(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,o=t.call(e),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i}function __spread(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(__read(arguments[r]));return e}var normalize=function(e){var r=csso.minify(e).css,t=[],n=csstree.toPlainObject(csstree.parse(r));return normalizeBlock(n,(function(e){t.push(e)}),[]),t.map((function(e){return[e,JSON.stringify(e)]})).sort((function(e,r){return __read(e,2)[1]>__read(r,2)[1]?1:-1})).map((function(e){return __read(e,1)[0]}))},compare=function(e,r){var t=normalize(e),n=normalize(r);if(JSON.stringify(t)===JSON.stringify(n))return[[],[]];var a=new Map,o=new Set,i=new Set;return t.forEach((function(e){a.set(JSON.stringify(e),!1)})),n.forEach((function(e){var r=JSON.stringify(e);a.has(r)?a.set(r,!0):o.add(r)})),a.forEach((function(e,r){!1===e&&i.add(r)})),[__spread(o.values()).map((function(e){return JSON.parse(e)})),__spread(i.values()).map((function(e){return JSON.parse(e)}))]},areEqual=function(e,r){var t=compare(e,r);return t[0].length+t[1].length===0},isSubsetOf=function(e,r){return 0===compare(r,e)[0].length},normalizeBlock=function e(r,t,n){return r.children.map((function(r){if("Atrule"===r.type){var a="@"+r.name;null!==r.prelude&&(a+=" "+csstree.generate(r.prelude)),null===r.block?t(__spread(n,[a])):e(r.block,t,__spread(n,[a]))}else if("Rule"===r.type){if("children"in r.prelude)r.prelude.children.filter((function(e){return"Selector"===e.type})).map((function(e){return csstree.generate(e)})).map((function(a){e(r.block,t,__spread(n,[a]))}))}else"Declaration"===r.type&&t(__spread(n,[r.property,csstree.generate(r.value)]))})).filter(Boolean)};exports.areEqual=areEqual,exports.compare=compare,exports.isSubsetOf=isSubsetOf,exports.normalize=normalize;
//# sourceMappingURL=compare-stylesheet.cjs.production.js.map
