# `typescript-library-starter`

This library is oriented around giving a low maintenance option for open source
creators of JS (and React!) libraries written with TypeScript.

Inspired by the best bits of `alexjoverm/typescript-library-starter` and
`tanem/generator-typescript-react-lib`.

## What's included?

- Toolchain for creating libraries written in TypeScript

from `tanem/generator-typescript-react-lib`:

- [x] Generates CommonJS, ES module, and Universal Module Definition bundles via
      Rollup.
- [x] Tests bundles via Jest.
- [x] Generates Typescript type declarations for publishing.
- [x] Outputs, strips, or wraps PropTypes declarations according to bundle type.
- [x] Makes Universal Module Definition bundles available via unpkg.

from `alexjoverm/typescript-library-starter`

- [x] Code of conduct
- [x] Contributing boilerplate
- [x] Version control asdf

from me

- [x] interactive setup script which asks the basics to help get you up and
      running
- [x] docusaurus website integrated with typedoc generated api docs
- [x] autogenerated coverage svg shield
- [x] Semantic releases

future

- [ ] configure renovate for improved automation

### Alternatives

Kent C. Dodds' setup (or a fork of) is a good option:
https://github.com/kentcdodds/kcd-scripts

### Gotchas

- No Windows support
- Expects `yarn` instead of `npm`

## Setup

### Step 1. Local setup

```sh
# Clone this directory locally, and cd into it
git clone https://github.com/tbjgolden/typescript-library-starter.git <yourdir>
cd <yourdir>

# Clear the git history from the starter
rm -rf .git

# Start the custom setup script, and install dependencies
yarn

# An example is in examples/basic-usage, let's also install its dependencies
cd examples/basic-usage
yarn

# Check everything is set up correctly
cd ../..
yarn test

# Finally, let's initialize a new git repository
git init
git add -A
git commit -m 'Initial commit' --no-verify
git remote add origin https://github.com/<user>/<repo>.git
git push -u origin master
```

### Step 2. Github setup

1. Create an NPM token:
   https://docs.npmjs.com/creating-and-viewing-authentication-tokens
2. Create a Github repo of the **same name** that you selected in the setup
   script
3. Add the NPM token to your repository's secrets:  
   your-repo > Settings > Secrets > New Secret  
   `NPM_TOKEN=<your token from Step 1>`

> This will enable automatic releases that follow semantic versioning rules, by
> reading your commit messages. The commit messages will need to be in the
> [conventional changelog](https://github.com/conventional-changelog/conventional-changelog)
> format. A commit message hook will help you make sure that your commit
> messages are correctly formatted (in the
> [conventional commit](https://www.conventionalcommits.org) format). If you're
> not familiar with it, it's worth reading the (very short) spec and FAQs.

### Step 3. Go!

#### `yarn start`

This will:

1. run Storybook (if there are `src/**/*.stories.{ts,tsx}` files).
2. run Jest in watch mode (if there are `src/**/*.spec.{ts,tsx}` files)

> Note: It will do nothing if no matching `.stories.` or `.spec.` files are
> found.

#### `yarn start` on the included example

`examples/basic-usage` is an basic project bootstrapped with Create React App,
which you can use to demo an example of how to use the library you're making. To
run it, run `yarn start` inside `examples/basic-usage`.

## Project Website

This starter also includes a website built using
[Docusaurus 2](https://v2.docusaurus.io/); the same used on popular projects
such as `create-react-app` and `prettier`.

Many open source projects will not need a website. A script is included to
remove the website; in this case, TypeDoc is used instead to generate markdown
documentation on Github (in the docs/api folder, you may use the docs folder for
custom documentation).

```
node scripts/removeWebsite.js
```

Add, commit, push; you're changes should be reflected after the workflow job is
complete.
